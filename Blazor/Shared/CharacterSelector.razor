@inherits CharacterSelectorBase

<div style="width: 20%">
    <h4>Pick a Character</h4>
    @if (PCs.Count > 0)
    {
        <select class="form-control d-flex" id="servers" @onchange="@PCSelected">
        @if (AllowEmpty) {
            <option value="-1"></option>
        }
        @foreach (var s in PCs)
        {
            if (s.ID == CurrentCharacter) {
                <option value="@s.ID" selected="selected">@s.Name</option>
            }
            else {
                <option value="@s.ID">@s.Name</option>
            }
        }
    </select>
    }
    else
    {
        <p>You do not have any characters on this server: you can't send any message.</p>
    }
</div>

@code {
    protected async Task PCSelected(UIChangeEventArgs pcEvent)
    {
        CurrentCharacter = int.Parse(pcEvent.Value.ToString());
        await OnSelected.InvokeAsync(CurrentCharacter);
    }
}
