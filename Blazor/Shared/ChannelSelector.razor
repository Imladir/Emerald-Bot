@inherits ChannelSelectorBase


<FormGroup>
    <BlazorLabel>Pick a Channel</BlazorLabel>
    <Dropdown IsOpen="@IsOpen">
        <DropdownToggle @onclick="@OnClick">@(Channels.Count > 0 ? Channels.Find(x => x.ID == CurrentChannel).Name : "Loading...")</DropdownToggle>
        <DropdownMenu IsOpen="@IsOpen">
            @foreach (var s in Channels)
            {
                <DropdownItem @key="@s.ID" @onclick="@(async (e) => await ChannelSelected(s.ID))">@s.Name</DropdownItem>
            }
        </DropdownMenu>
    </Dropdown>
</FormGroup>

@code {
private bool IsOpen = false;


private void OnClick(UIMouseEventArgs e)
{
    IsOpen = !IsOpen;
    StateHasChanged();
}

protected async Task ChannelSelected(ulong newSelection)
{
    if (newSelection != CurrentChannel)
    {
        CurrentChannel = newSelection;
        await OnSelected.InvokeAsync(CurrentChannel);
    }
    IsOpen = false;
}

}