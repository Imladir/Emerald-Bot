@inherits AddOrEditBase

<RedirectToLoginIfNotAuthorized />

<Container IsFluid="true">
    <Row>
        <BlazorCol>
            <BlazorForm>
                @if (IsEdit)
                {
                    <h1>Message edition</h1>
                    <CharacterSelector ServerID="@ServerID" OnSelected="@CharacterSelected" AllowEmpty="true" />
                }
                else
                {
                    <h1>Send a new message</h1>
                    <ServerSelector OnSelected="@ServerSelected" />
                    <ChannelSelector ServerID="@ServerID" OnSelected="@ChannelSelected" />
                    <CharacterSelector ServerID="@ServerID" OnSelected="@CharacterSelected" AllowEmpty="false" />
                }
                <BlazorInput InputType="InputType.Text" @bind-Value="@Message.Title" PlaceHolder="Message title" />
                <BlazorInput Id="MessageText" InputType="InputType.TextArea" @bind-Value="@Message.Text" Rows="12" @onkeyup="@UpdateCharacterCount" />
            </BlazorForm>
            @if (@TextLength < 2048)
            {
                <Alert Color="Color.Success">
                    @TextLength Characters
                </Alert>
            }
            else
            {
                <Alert Color="Color.Danger">
                    @TextLength Characters
                </Alert>
            }
            <BlazorButton Color="Color.Success" @onclick="@SaveMessage">Save Message</BlazorButton>
        </BlazorCol>
        <BlazorCol>
            <Image IsRounded="true" Alignment="Alignment.Center" src="@Message.Icon" style="width: 300px; height: auto;" />
        </BlazorCol>
    </Row>
</Container>

@*<input @bind="@Message.Title" />
    <br />
    <textarea @ref="editor" @bind="@Message.Text" @onkeyup="@UpdateCharacterCount" rows="15" cols="100"></textarea>*@

